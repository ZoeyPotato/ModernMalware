using UnityEngine;
using System.Collections;

public class PointIndicator : MonoBehaviour
{

    public Color color;
    public float scrollSpeed = 0.05f;
    public float duration = 1.5f;
    public float alpha = 1.0f;
    private Vector3 originalWorldPosition = Vector3.zero;
    private float verticalRise = 0.0f;
    // Use this for initialization
    void Start()
    {
        originalWorldPosition = transform.position;
        //Debug.LogError("Pos: " + originalWorldPosition.x);
        Vector3 v = Camera.main.WorldToViewportPoint(originalWorldPosition);
        transform.position = new Vector3(v.x, v.y, 5);
        guiText.material.color = color;
    }

    // Update is called once per frame
    void Update()
    {
        if (alpha > 0.001f)
        {
            Vector3 v = Camera.main.WorldToViewportPoint(originalWorldPosition);
            transform.position = new Vector3(v.x, v.y + verticalRise, 5);
            verticalRise += scrollSpeed * Time.smoothDeltaTime;
            alpha -= Time.smoothDeltaTime / duration;
            color.a = alpha;
            guiText.material.color = color;
        }
        else
        {
            Destroy(gameObject);
        }
    }
}
