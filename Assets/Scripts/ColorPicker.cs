using UnityEngine;
using System;
using System.Collections;

public class ColorPicker : MonoBehaviour
{
    public Texture2D colorPicker;
    public int ImageWidth = 100;
    public int ImageHeight = 100;
    public GameObject player;
    public Rect colorPanelRect = new Rect(10, 400, 200, 200);
    void OnGUI()
    {
        GUI.DrawTexture(colorPanelRect, colorPicker);
        if (GUI.RepeatButton(colorPanelRect, colorPicker))
        {
            Vector2 pickpos = Event.current.mousePosition;
            float aaa = pickpos.x - colorPanelRect.x;
            float bbb = pickpos.y - colorPanelRect.y;
            int aaa2 = (int)(aaa * (colorPicker.width / (colorPanelRect.width + 0.0f)));
            int bbb2 = (int)((colorPanelRect.height - bbb) * (colorPicker.height / (colorPanelRect.height + 0.0f)));
            Color col = colorPicker.GetPixel(aaa2, bbb2); 
            Player.playerColor = col;
            player.GetComponent<SpriteRenderer>().color = col;
            GameObject.Find("MeleeWeapon").GetComponent<SpriteRenderer>().color = col;
        }
    }
}