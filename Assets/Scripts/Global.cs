using UnityEngine;
using System.Collections;
using System.Collections.Generic;

public class Global : MonoBehaviour
{

    public List<GameObject> playerSpawnLocations = new List<GameObject>();
    public List<GameObject> enemySpawnLocations = new List<GameObject>();
    public static Global Instance;
    public GameObject pointPrefab = null;
    public AudioClip bossMusic = null;
    public AudioClip mainMusic = null;
    public bool isOnBoss = false;
    public bool isBossMusicPlaying = false;
    //public GameObject enemyPrefab = null;
    //public GameObject itemPrefab = null;
    //public GameObject playerPrefab = null;

    public void SpawnPoint(int points, Vector3 position)
    {
        GameObject pointInstance = (GameObject)Instantiate(pointPrefab, position, Quaternion.identity);
        pointInstance.guiText.text = points.ToString();
    }

	void Start ()
    {
        if (Instance == null)
        {
            Instance = this;

            foreach (GameObject spawnLocation in GameObject.FindGameObjectsWithTag("SpawnLocation"))
            {
                if (spawnLocation.GetComponent<SpawnLocationScript>().isForPlayer)
                    playerSpawnLocations.Add(spawnLocation);
                else
                    enemySpawnLocations.Add(spawnLocation);
            }
        }
	}
		
	void Update ()
    {
        // Win condition
        if (isOnBoss && !isBossMusicPlaying)
        {
            // switch to playing boss music
            AudioSource bgMusic = GetComponent<AudioSource>();
            bgMusic.Stop();
            bgMusic.clip = bossMusic;
            bgMusic.Play();
            isBossMusicPlaying = true;

        }
        else if (!isOnBoss && isBossMusicPlaying)
        {
            // switch to playing main music
            AudioSource bgMusic = GetComponent<AudioSource>();
            bgMusic.Stop();
            bgMusic.clip = mainMusic;
            bgMusic.Play();
            isBossMusicPlaying = false;
        }
	}
}
