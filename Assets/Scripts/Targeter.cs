using UnityEngine;
using System.Collections;

public class Targeter : MonoBehaviour {
	public BitPet bit;
	public float CurAttackCD;
	public float attackCD = 2f;
	// Use this for initialization
	void Start () {
		CurAttackCD = 0f;
	}
	
	// Update is called once per frame
	void Update () {
		if ((Time.realtimeSinceStartup - CurAttackCD) > attackCD){
			bit.attacking = false;
		}
	}
	
	void OnTriggerEnter2D(Collider2D other){
		if (bit.attacking)
			return;

        if (Player.Instance.isBeingAttacked && (
            other.gameObject.name == "Worm" ||
            other.gameObject.name == "Trojan" ||
            other.gameObject.name == "Spyware" ||
            other.gameObject.name == "CorruptedFile" ||
            other.gameObject.name == "Worm(Clone)" ||
            other.gameObject.name == "Trojan(Clone)" ||
            other.gameObject.name == "Spyware(Clone)" ||
            other.gameObject.name == "CorruptedFile(Clone)"))
        {
			//Debug.Log (CurAttackCD + "\n");
			if ((Time.realtimeSinceStartup - CurAttackCD) > attackCD && Input.GetKey(KeyCode.Q)){
                //Debug.Log("In here!!!");
				CurAttackCD = Time.realtimeSinceStartup;   //reset the attack CD timerEnemy.enemies.Find(other.transform.parent.gameObject.GetType());
				bit.attacking = true;
				bit.near = other.transform.position;
				
			}
		}
	}

	void OnTriggerStay2D(Collider2D other){
		if (bit.attacking)
			return;


        if (Player.Instance.isBeingAttacked && (
            other.gameObject.name == "Worm" ||
            other.gameObject.name == "Trojan" ||
            other.gameObject.name == "Spyware" ||
            other.gameObject.name == "CorruptedFile" ||
            other.gameObject.name == "Worm(Clone)" ||
            other.gameObject.name == "Trojan(Clone)" ||
            other.gameObject.name == "Spyware(Clone)" ||
            other.gameObject.name == "CorruptedFile(Clone)"))
        {
			//Debug.Log (CurAttackCD + "\n");
			if ((Time.realtimeSinceStartup - CurAttackCD) > attackCD && Input.GetKey(KeyCode.Q)){
                //Debug.Log("In here2!!!");
				CurAttackCD = Time.realtimeSinceStartup;   //reset the attack CD timerEnemy.enemies.Find(other.transform.parent.gameObject.GetType());
					bit.attacking = true;
					bit.near = other.transform.position;

			}
		}
	}
}
