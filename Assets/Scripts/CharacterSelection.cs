using UnityEngine;
using System.Collections;

public class CharacterSelection : MonoBehaviour
{
    string enteredText = "Player";
    public GUIStyle promptStyle;
    public GUIStyle playerNameTextStyle;
	// Use this for initialization
	void Start ()
    {
	
	}
	
	// Update is called once per frame
	void Update ()
    {
	
	}

    void OnGUI()
    {
        GUI.BeginGroup(new Rect(Screen.width / 2.2f, Screen.height / 1.7f, Screen.width, Screen.height), playerNameTextStyle);
        GUI.SetNextControlName("PromptField");
        GUILayout.Label("Player name: ", promptStyle);
        GUI.SetNextControlName("NameField");
        GUI.FocusControl("NameField");
		if (Event.current.type == EventType.KeyDown && Event.current.keyCode == KeyCode.Return)
        {
			Debug.Log("charselect");
			Application.LoadLevel ("MainGame");
			FirstGameManager.TheGameState.SetCurrentLevel ("MainGame");
			FirstGameManager.TheGameState.PrintCurrentLevel ();
            //enteredText = GUILayout.TextField(enteredText, playerNameTextStyle);
        }
        else if (Event.current.type == EventType.KeyUp && Event.current.keyCode == KeyCode.Return)
        {
        }
        else
        {
            enteredText = GUILayout.TextField(enteredText, 12, playerNameTextStyle);
            enteredText = enteredText.Replace("\r", "");
            enteredText = enteredText.Replace("\n", "");
        }

		Player.playerName = enteredText;
        GUI.EndGroup();

        //GUIStyle playerNameTextStyle = GUI.skin.GetStyle("PlayerNameText");
        //GUI.BeginGroup(new Rect(Screen.width / 2, Screen.height / 2, Screen.width, Screen.height), playerNameTextStyle);
        //GUI.Label(new Rect(0, 0, 100, 30), "Player name: ", playerNameTextStyle);
        
        //enteredText = GUI.TextField(new Rect(100, 0, 200, 30), enteredText, 40, playerNameTextStyle);
    }
}
